---
// Navbar component with mobile hamburger menu
const base = import.meta.env.BASE_URL;
const currentPath = Astro.url.pathname;

const navItems = [
  { href: base, label: 'Home' },
  { href: `${base}students`, label: 'Students' },
  { href: `${base}news`, label: 'News' },
  { href: `${base}publications`, label: 'Publications' },
  { href: `${base}slides`, label: 'Artifacts' },
];

function isActive(href: string, current: string): boolean {
  if (href === base) return current === base || current === `${base}/`;
  return current.startsWith(href);
}
---

<nav class="navbar">
  <div class="navbar__logo-wrapper">
    <a href={base} class="navbar__logo-link">
      <img src="https://wiscprivacy.com/uw_logo.png" alt="UW Logo" class="navbar__logo" />
    </a>
    <button class="navbar__hamburger" id="hamburger" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>

  <div class="navbar__nav" id="nav-menu">
    {navItems.map(item => (
      <a 
        href={item.href} 
        class={`navbar__item ${isActive(item.href, currentPath) ? 'active' : ''}`}
      >
        {item.label}
      </a>
    ))}
  </div>
</nav>

<script>
  const hamburger = document.getElementById('hamburger');
  const navMenu = document.getElementById('nav-menu');

  hamburger?.addEventListener('click', () => {
    navMenu?.classList.toggle('open');
    hamburger?.classList.toggle('active');
  });

  // Close menu when clicking a link (mobile)
  const navItems = document.querySelectorAll('.navbar__item');
  navItems.forEach(item => {
    item.addEventListener('click', () => {
      navMenu?.classList.remove('open');
      hamburger?.classList.remove('active');
    });
  });
</script>

